## Apteka-Scrapy
–ü–∞—Ä—Å–µ—Ä –¥–ª—è —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö c —Å–∞–π—Ç–∞ apteka-ot-sklada.ru

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –≤ –ø—Ä–æ–µ–∫—Ç–µ  
üîπ Python 
üîπ Scrapy
üîπ Proxy

## –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∫–æ–º–∞–Ω–¥–æ–π:
```bash
git clone git@github.com:oitczvovich/brandquad_parser_test.git
``` 

2. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ venv –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

``` bash
python3 -m venv venv && source venv/bin/activate && pip install -r requirements.txt

```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —Ä–∞–±–æ—Ç—ã –±–µ–∑ –ø—Ä–æ–∫—Å–∏.
3. 1. –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª–µ apteka_scrapy/settings.py. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è 
```python
# –°—Å—ã–ª–∫–∞ –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ –∫–æ—Ç–æ—Ä—ã–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Å—Ç–∏ –ø–∞—Ä—Å–∏–Ω–≥
CATEGORY_BY_PARSING = [
    <–í—Å—Ç–∞–≤–∏—Ç—å —Å—Å–ª—ã–∫—É –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—é —Ç–∏–ø–∞ "https://apteka-ot-sklada.ru/catalog/">
]
# –°–º–æ—Ç—Ä–∏ ID –≥–æ—Ä–æ–¥–æ–≤ –Ω–∞ —Å–∞–π—Ç–µ  https://apteka-ot-sklada.ru/ 92 - —Å–æ–æ—Ç–≤–µ—Ç—Å–≤—É–µ—Ç –≥.–¢–æ–º—Å–∫,
PARSER_CITY_ID = "92" 
# –≤—Ä–µ–º—è –∑–∞–¥–µ—Ä–∂–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö.
DOWNLOAD_DELAY = 1

```
### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–∫—Å–∏.
3. 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–∫—Å–∏.  

–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª .env
```bash
# —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é —É–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–æ–∫—Å–∏, –≤–æ–∑–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å  –ø—Ä–æ–∫—Å–∏ –±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.
PROXY_LIST=host:posrt:login:password, host:posrt:login:password 
```

–í —Ñ–∞–π–ª–µ apteka_scrapy/settings.py. –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä. 
```bash
DOWNLOADER_MIDDLEWARES = {'apteka_scrapy.middlewares.HttpProxyMiddleware': 350,}
```
### –ó–∞–ø—É—Å–∫ –ø–∞—Ä—Å–µ—Ä–∞.

4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–∞—Ä—Å–µ—Ä –∏–∑ –ø–∞–ø–∫–∏, –≥–¥–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω —Ñ–∞–π–ª README.md
```bash
scrapy crawl apteka_spider
```

5. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ø–∞–ø–∫–µ results.
–ò–∑–º–µ–Ω–∏—Ç—å –∞–¥—Ä–µ—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –º–æ–∂–Ω–æ –≤ apteka_scrapy/settings.py.
```bash
FEED_URI = <–Ω–æ–≤—ã–µ –∞–¥—Ä–µ—Å –∏ –∏–º—è> 
```

–í —Ñ–∞–π–ª —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ
```bash
    "city" - –î–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è, –∏–∑ –∫–∞–∫–æ–π –ª–æ–∫–∞—Ü–∏–∏ —Å–æ–±—Ä–∞–Ω—ã –¥–∞–Ω–Ω—ã–µ.
    "timestamp" - –¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ timestamp
    "RPC" - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–¥ —Ç–æ–≤–∞—Ä–∞ - –µ—Å—Ç—å –≤ —Å—Å—ã–ª–∫–µ –Ω–∞ —Ç–æ–≤–∞—Ä.
    "url" - –°—Å—ã–ª–∫–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ç–æ–≤–∞—Ä–∞
    "title" - –ó–∞–≥–æ–ª–æ–≤–æ–∫/–Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ (–µ—Å–ª–∏ –≤ –∫–∞—Ä—Ç–æ—á–∫–µ —Ç–æ–≤–∞—Ä–∞ —É–∫–∞–∑–∞–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤ —É–ø–∞–∫–æ–≤–∫–µ –∏–ª–∏ –æ–±—ä–µ–º, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å –∏—Ö –≤ title –≤ —Ñ–æ—Ä–º–∞—Ç–µ {–Ω–∞–∑–≤–∞–Ω–∏–µ}, {–æ–±—ä–µ–º})
    "marketing_tags" - –°–ø–∏—Å–æ–∫ —Ç—ç–≥–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä ['–ü–æ–ø—É–ª—è—Ä–Ω—ã–π', '–ê–∫—Ü–∏—è', '–ü–æ–¥–∞—Ä–æ–∫'], –µ—Å–ª–∏ —Ç—ç–≥ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –≤ –≤–∏–¥–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, —Å–æ–±–∏—Ä–∞—Ç—å –µ–≥–æ –Ω–µ –Ω—É–∂–Ω–æ
    "brand" - –ë—Ä–µ–Ω–¥ —Ç–æ–≤–∞—Ä–∞, –±–µ—Ä–µ—Ç—Å—è –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Ç–æ–≤–∞—Ä–∞. –ü–µ—Ä–≤–æ–µ —Å–ª–æ–≤–æ —Å –±–æ–ª—å—à–æ–π –±—É–∫–≤—ã, –µ—Å–ª–∏ —Å–ª–µ–¥—É—é—â–µ–µ —Å–ª–æ–≤–æ —Ç–æ–∂–µ —Å –±–æ–ª—å—à–æ–π –±—É–∫–≤—ã –∏ —Ç–∞–∫–∂–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–µ–¥–ª–æ–≥–∞ –º–µ–∂–¥—É —Å–ª–æ–≤–∞–º–∏.
    "section" -  –ò–µ—Ä–∞—Ä—Ö–∏—è —Ä–∞–∑–¥–µ–ª–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä ['–ò–≥—Ä—É—à–∫–∏', '–†–∞–∑–≤–∏–≤–∞—é—â–∏–µ –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∏–≥—Ä—É—à–∫–∏', '–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∏–≥—Ä—É—à–∫–∏']
    "price_data" 
    "original" - –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞. –¢.–∫. –Ω–∞ —Å–∞–π—Ç–µ –Ω–µ—Ç —Å–∏—Å—Ç–µ–º—ã —Å–∫–∏–¥–æ–∫, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –±—Ä–∞–ª —Ü–µ–Ω—É, —É–∫–∞–∑–∞–Ω–Ω—É—é –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ç–æ–≤–∞—Ä–∞.

    "stock" = scrapy.Field(serializer=dict)
    "in_stock" - –û—Ç—Ä–∞–∂–∞—Ç—å –Ω–∞–ª–∏—á–∏–µ —Ç–æ–≤–∞—Ä–∞ –≤ –∞–ø—Ç–µ–∫–∞—Ö
    "count" - –ï—Å–ª–∏ –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –æ—Å—Ç–∞–≤—à–µ–≥–æ—Å—è —Ç–æ–≤–∞—Ä–∞ –≤ –Ω–∞–ª–∏—á–∏–∏, –∏–Ω–∞—á–µ 0
    "assets" 
    "main_image" - –°—Å—ã–ª–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
    "set_images" -  –°–ø–∏—Å–æ–∫ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Ç–æ–≤–∞—Ä–∞
    
    "metadata" 
    "__description" - –û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞.
    –ï—Å–ª–∏ —É —Ç–æ–≤–∞—Ä–∞ –±—ã–ª –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ –≤–µ—Å –∏–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤ —É–ø–∞–∫–æ–≤–∫–µ, —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ.
    "weight": "–í–µ—Å", - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –í–µ—Å –∏ –µ–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏–π. 
    "count": "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤ —É–ø–∞–∫–æ–≤–∫–µ", —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∫–∞–∫ —Å—Ç—Ä–æ–∫–∞ —Å N –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ. 

    variants - –Ω–∞ —Å–∞–π—Ç–µ —É —Ç–æ–≤–∞—Ä–∞ –Ω–µ—Ç –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–µ–∑–¥–µ 1.
```

## –ê–≤—Ç–æ—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞
### –°–∫–∞–ª–∞—Ü–∫–∏–π –í–ª–∞–¥–∏–º–∏—Ä
Telegramm: https://t.me/OitcZvovich<br>
e-mail: skalakcii@yandex.ru<br>
Github: https://github.com/oitczvovi<br>
Linkedin: https://www.linkedin.com/in/vladimirskala/<br>